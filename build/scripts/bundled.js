const START_STOP_ID="start-stop-button",TASK_BTN_ID="task",TASK_POMO_COUNTER="task-pomo-counter",LENGTH_OF_WEEK=7,POMO_CYCLE_LENGTH=4,WORK_LENGTH=1500,SHORT_BREAK=300,LONG_BREAK=900,SLIDE_OPEN="slide-open",SLIDE_CLOSE="slide-close",SLIDE_ACROSS_LEFT="slide-across-left",SLIDE_OPEN_SETTINGS="slide-open-settings",SLIDE_CLOSE_SETTINGS="slide-close-settings",keys={ESCAPE:"Escape",SPACE:"Space",ENTER:"Enter",T:"KeyT",Y:"KeyY",N:"KeyN",LEFT_ARROW:"ArrowLeft",RIGHT_ARROW:"ArrowRight",DOWN_ARROW:"ArrowDown"},timerOptions={STOPPED:"stopped",POMO:"pomo",SHORT:"short break",LONG:"long break"},BEST_DAILY_POMO_ID="best-daily-pomo-count",TOTAL_POMO_ID="total-pomo-count",TOTAL_TASK_ID="total-task-count",TODAY_TASK_ID="today-task-count",WEEK_HISTORY="week-history",TODAY_DATE_ID="today",WEEK_START_ID="week-start",TODAY_POMO_ID="today-pomo-count",TOTAL_INTERRUPTION="total-interruption",TODAY_INTERRUPTION="today-interruption",ZEROS=[0,0,0,0,0,0,0];function setCounter(t,e){window.localStorage.setItem(t,String(e))}function setDate(t,e){window.localStorage.setItem(t,e.toString())}function setWeekHistory(t){window.localStorage.setItem(WEEK_HISTORY,JSON.stringify(t))}function getCounter(t){return Number(window.localStorage.getItem(t))}function getDate(t){return new Date(window.localStorage.getItem(t)||new Date(0))}function getWeekHistory(){return JSON.parse(window.localStorage.getItem(WEEK_HISTORY))||ZEROS}function incrTasks(){updateStorage(),setCounter(TODAY_TASK_ID,getCounter(TODAY_TASK_ID)+1),setCounter(TOTAL_TASK_ID,getCounter(TOTAL_TASK_ID)+1)}function incrPomoCount(){updateStorage();const t=getCounter(TODAY_POMO_ID)+1;setCounter(TODAY_POMO_ID,t),setCounter(TOTAL_POMO_ID,getCounter(TOTAL_POMO_ID)+1),getCounter(BEST_DAILY_POMO_ID)<t&&setCounter(BEST_DAILY_POMO_ID,t);const e=((new Date).getDay()-1+7)%7,n=getWeekHistory();n[e]++,setWeekHistory(n)}function incrInterruptions(){updateStorage(),setCounter(TODAY_INTERRUPTION,getCounter(TODAY_INTERRUPTION)+1),setCounter(TOTAL_INTERRUPTION,getCounter(TOTAL_INTERRUPTION)+1)}function updateStorage(){if(!isStorageDateToday()){setCounter(TODAY_POMO_ID,0),setCounter(TODAY_TASK_ID,0),setCounter(TODAY_INTERRUPTION,0);const t=new Date;setDate("today",t);const e=getRecentMonday(t);isSameDay(getDate("week-start"),e)||(setDate("week-start",e),setWeekHistory(ZEROS))}}function isStorageDateToday(){return isSameDay(new Date,getDate("today"))}function isSameDay(t,e){const n=t.getDate()===e.getDate(),o=t.getMonth()===e.getMonth(),a=t.getFullYear()===e.getFullYear();return n&&o&&a}function getRecentMonday(t){const e=new Date(t);for(;1!==e.getDay();)e.setDate(e.getDate()-1);return e}const RESET_YES_ID="reset-yes-button",RESET_NO_ID="reset-no-button",ACCESSIBLE_CLASS="accessible",root=document.documentElement;document.onkeydown=keyControls;let accessibleMode=!1,keystrokeMode=!0,autostartMode=!1,tabMode=!0;function toggleAccessibility(){accessibleMode?root.classList.remove("accessible"):root.classList.add("accessible"),accessibleMode=!accessibleMode,accessibleMode?localStorage.setItem("accessible","true"):localStorage.setItem("accessible","false")}function isA11yEnabled(){return accessibleMode}function keyControls(t){switch(t.code){case keys.ESCAPE:t.preventDefault(),settingsPaneIsOpen?closeSettingsPane():statsPaneIsOpen&&closeStatsPane();break;case keys.RIGHT_ARROW:statsButton.disabled||(t.preventDefault(),removeAll(),settingsPaneIsOpen?closeSettingsPane():openStatsPane());break;case keys.LEFT_ARROW:settingsButton.disabled||(t.preventDefault(),removeAll(),statsPaneIsOpen?closeStatsPane():openSettingsPane());break;case keys.SPACE:document.activeElement instanceof HTMLInputElement||(t.preventDefault(),startResetController());break;case keys.Y:document.getElementById(RESET_YES_ID).click();break;case keys.N:document.getElementById(RESET_NO_ID).click();break;case keys.T:case keys.DOWN_ARROW:t.preventDefault(),document.getElementById("task").click()}}function toggleKeystroke(){keystrokeMode=!keystrokeMode,keystrokeMode?localStorage.setItem("keystroke","true"):localStorage.setItem("keystroke","false"),document.onkeydown=keystrokeMode?keyControls:void 0}function toggleAutoStart(){autostartMode=!autostartMode,autostartMode?localStorage.setItem("auto","true"):localStorage.setItem("auto","false")}function isAutoStartEnabled(){return autostartMode}function toggleTab(){tabMode=!tabMode,tabMode?localStorage.setItem("tab","true"):localStorage.setItem("tab","false"),tabMode||(window.document.title="Pomodoro by Texas Codem")}function isTabEnabled(){return tabMode}document.onkeydown=keyControls,"true"===localStorage.getItem("accessible")?(toggleAccessibility(),document.getElementById("colors-switch").checked=!0):document.getElementById("colors-switch").checked=!1,"false"===localStorage.getItem("keystroke")?(toggleKeystroke(),document.getElementById("keystroke-switch").checked=!1):document.getElementById("keystroke-switch").checked=!0,"true"===localStorage.getItem("auto")?(toggleAutoStart(),document.getElementById("autostart-switch").checked=!0):document.getElementById("autostart-switch").checked=!1,"false"===localStorage.getItem("tab")?(toggleTab(),document.getElementById("tab-switch").checked=!1):document.getElementById("tab-switch").checked=!0;let X_LABELS=["M","T","W","Th","F","Sa","Su"],X_LABEL="Days",Y_LABEL="Pomos Completed";const TEXT_FONT="Roboto",TEXT_FONT_SIZE="12px",TEXT_FONT_SIZE_ACCESSIBILITY="15px",TEXT_FONT_WEIGHT="normal",TEXT_FONT_WEIGHT_ACCESSIBILITY="bold",BAR_COLOR="#eb4000",BAR_COLOR_ACCESSIBILITY="#B50014",ANIMATION_SPEED=275,Y_MIN_SCALING=3,Y_MAX_STEP=6,ONE=1,TEST_PROCESS="test";function findMax(t){let e=-1;for(let n=0;n<t.length;n++)t[n]>e&&(e=t[n]);return e}function changeLanguageAxis(t,e,n){X_LABELS=t,X_LABEL=e,Y_LABEL=n}function displayGraph(t=ZEROS){if("object"==typeof process&&"test"===process.env.NODE_ENV)return;const e=isA11yEnabled()?"#B50014":"#eb4000",n=isA11yEnabled()?"15px":"12px",o=isA11yEnabled()?"bold":"normal";let a=findMax(t),s=null;a<3&&(a=3),a<6&&(s=1);const r={type:"bar",tooltip:{"font-family":"Roboto","font-size":n,"font-weight":o},scaleX:{label:{text:X_LABEL,"font-family":"Roboto","font-size":n,"font-weight":o},labels:X_LABELS},scaleY:{label:{text:Y_LABEL,"font-family":"Roboto","font-size":n,"font-weight":o},step:s,"max-value":a},plotarea:{margin:"dynamic"},plot:{animation:{effect:"ANIMATION_EXPAND_BOTTOM",method:"ANIMATION_STRONG_EASE_OUT",sequence:"ANIMATION_BY_NODE",speed:275}},series:[{values:t,"background-color":e,alpha:1}]};zingchart.render({id:"graph",data:r,height:"100%",width:"100%"})}const timerBlock=document.getElementsByClassName("center-container")[0],breakBlock=document.getElementsByClassName("break-message")[0];document.getElementsByClassName("counters-container")[0];const statsPane=document.getElementById("stats-container"),statsOpenButton=document.getElementById("stats-open-button"),statsCloseButton=document.getElementById("stats-close-button"),MINUTES$1=60,NUM_DECIMALS=2;let statsPaneIsOpen=!1;function updateStats(){updateStorage(),displayTodayStats(),displayTotalStats(),displayGraph(getWeekHistory())}function openStatsPane(){updateStats(),removeAll(),settingsPane.classList.contains(SLIDE_OPEN_SETTINGS)?(closeSettingsPane(),timerBlock.classList.add(SLIDE_ACROSS_LEFT),breakBlock.classList.add(SLIDE_ACROSS_LEFT)):(timerBlock.classList.add(SLIDE_OPEN),breakBlock.classList.add(SLIDE_OPEN)),statsPane.classList.add(SLIDE_OPEN),statsPaneIsOpen=!0,toggleButtons$1()}function closeStatsPane(){timerBlock.classList.remove(SLIDE_OPEN),breakBlock.classList.remove(SLIDE_OPEN),statsPane.classList.remove(SLIDE_OPEN),timerBlock.classList.remove(SLIDE_ACROSS_LEFT),breakBlock.classList.remove(SLIDE_ACROSS_LEFT),timerBlock.classList.add(SLIDE_CLOSE),breakBlock.classList.add(SLIDE_CLOSE),statsPane.classList.add(SLIDE_CLOSE),statsPaneIsOpen=!1,toggleButtons$1()}function toggleButtons$1(){statsOpenButton.disabled=statsPaneIsOpen,statsCloseButton.disabled=!statsPaneIsOpen}function displayTotalStats(){const t=getCounter(TOTAL_POMO_ID),e=getCounter(TOTAL_INTERRUPTION),n=getCounter(BEST_DAILY_POMO_ID),o=getCounter(TOTAL_TASK_ID);document.getElementById("total-pomodoros").innerHTML=t,document.getElementById("total-interruptions").innerHTML=(e/(t||1)).toFixed(2),document.getElementById("total-best-pomo").innerHTML=n,document.getElementById("total-best-time").innerHTML=(25*n).toFixed(2),document.getElementById("total-tasks").innerHTML=o}function displayTodayStats(){const t=getCounter(TODAY_POMO_ID),e=getCounter(TODAY_INTERRUPTION),n=getCounter(TODAY_TASK_ID);document.getElementById("today-pomodoros").innerHTML=t,document.getElementById("today-tasks").innerHTML=n,document.getElementById("today-interruptions").innerHTML=e}function statsPaneStatus(){return statsPaneIsOpen}statsOpenButton.addEventListener("click",openStatsPane),statsCloseButton.addEventListener("click",closeStatsPane);const background=document.getElementById("backgrounds"),backgroundOneOption=document.getElementById("background_1"),backgroundTwoOption=document.getElementById("background_2"),backgroundThreeOption=document.getElementById("background_3"),backgroundOneURL="url('./images/background.svg')",backgroundTwoURL="url('./images/background2.svg')",backgroundThreeURL="url('./images/background3.svg')";function changeBackground(){"original"===this.value?(document.documentElement.style.backgroundImage=backgroundOneURL,localStorage.setItem("bg","original")):"desert"===this.value?(document.documentElement.style.backgroundImage=backgroundTwoURL,localStorage.setItem("bg","desert")):(document.documentElement.style.backgroundImage=backgroundThreeURL,localStorage.setItem("bg","lake"))}const bg=localStorage.getItem("bg");switch(bg){case"original":default:background.value=backgroundOneOption.value;break;case"desert":background.value=backgroundTwoOption.value;break;case"lake":background.value=backgroundThreeOption.value}const enUS={pomobearHeader:"Pomobear",breakMsg:"Take a break!",pomodoro:"Pomodoro",shortBreak:"Short Break",longBreak:"Long Break",begin:"Begin",reset:"Reset",end:"End Session",breakMessages:["Stand up!","Relax your mind","Rest!","Breathe","Take a break!"],interruption:"This will count as an interruption.<br> Are you sure?",interruption2:"End this pomo session? <br> This will not count as an interruption.",yes:"Yes",no:"No",completion:'Complete Task: <span id="task-pomo-counter">0</span> Pomos',settingsHeader:"Settings",personalizationHeader:"Personalization Options",accessibilityHeader:"Accessibility Options",settingsColor:"Colorblindness",settingsKeystroke:"Keystroke Access",settingsAuto:"Auto-Start Timer",settingsTab:"Tab Timer Visibility",settingsBackgrounds:"Backgrounds",settingsLanguage:"Languages",background1:"Original",background2:"Desert",background3:"Lake",dropdownEn:"English",dropdownKo:"Korean",dropdownEs:"Spanish",statsHeader:"User Statistics",todayHeader:"Today",pomoCycle:"Pomos cycles:",pomoCycleUnits:'<span id="today-pomodoros">____</span> po.',todayInterruption:"Interruptions:",totalTasks:"Total Tasks:",totalTasksUnits:'<span id="today-tasks">____</span> tasks',todayTasks:"tasks",totalHeader:"Totals",totalPomoCycleUnits:'<span id="total-pomodoros">____</span> po.',avgInterruptions:"Avg. Interruptions:",avgInterruptionsUnits:'<span id="total-interruptions">____</span> per po.',bestDay:"Best Day:",bestDayUnits:'<span id="total-best-pomo">____</span> po. |<span id="total-best-time">____</span> min.',totalTotalTasksUnits:'<span id="total-tasks">____</span> tasks',weeklyHeader:"Weekly Overview",weekDays:["M","T","W","Th","F","Sa","Su"],day:"Days",pomosCompleted:"Pomos Completed"},ko={pomobearHeader:"뽀모곰",breakMsg:"휴식을 취하세요!",pomodoro:"뽀모도로",shortBreak:"짧은 휴식",longBreak:"긴 휴식",begin:"시작",reset:"재설정",end:"마무리",breakMessages:["일어서!","차분하자!","휴식!","들숨 날숨","화이팅!"],interruption:"이것은 잠시 중단으로 간주됩니다.<br> 계속하시겠습니까?",interruption2:"이 세션을 종료하시겠습니까? <br> 이것은 중단으로 간주되지 않습니다.",yes:"예",no:"아니요",completion:'작업 완료: <span id="task-pomo-counter">0</span> 뽀모스',settingsHeader:"설정",personalizationHeader:"개인화 옵션",accessibilityHeader:"접근성 옵션",settingsColor:"색맹 옵션",settingsKeystroke:"키 입력 옵션",settingsAuto:"타이머 자동 시작",settingsTab:"탭 타이머 가시성",settingsBackgrounds:"배경",settingsLanguage:"언어",background1:"기본",background2:"사막",background3:"호수",dropdownEn:"영어",dropdownKo:"한국어",dropdownEs:"스페인어",statsHeader:"사용자 통계",todayHeader:"오늘",pomoCycle:"뽀모스 주기:",pomoCycleUnits:'<span id="today-pomodoros">____</span> 뽀.',todayInterruption:"잠시 중단 횟수:",totalTasks:"총 작업 횟수:",totalTasksUnits:'<span id="today-tasks">____</span> 작업',todayTasks:"작업 횟수",totalHeader:"합계",totalPomoCycleUnits:'<span id="total-pomodoros">____</span> 뽀.',avgInterruptions:"평균 잠시 중단 횟수:",avgInterruptionsUnits:'뽀당 <span id="total-interruptions">____</span>',bestDay:"최고의 날:",bestDayUnits:'<span id="total-best-pomo">____</span> 뽀. |<span id="total-best-time">____</span> 분.',totalTotalTasksUnits:'<span id="total-tasks">____</span> 작업',weeklyHeader:"주간 개요",weekDays:["일","월","화","수","목","금","토"],day:"날",pomosCompleted:"끝난 뽀모"},es={pomobearHeader:"Oso pomodoro",breakMsg:"¡Tómate un descanso!",pomodoro:"Pomodoro",shortBreak:"Corto Descanso",longBreak:"Descanso largo",begin:"Comenzar",reset:"Reiniciar",end:"Finalizar sesión",breakMessages:["¡Ponerse de pie!","Relaja tu mente","¡Descansar!","Respirar","¡Tomar un descanso!"],interruption:"Esto contará como una interrupción. <br> ¿Estás seguro?",interruption2:"¿Finalizar esta sesión? <br> Esto no contará como una interrupción.",yes:"Sí",no:"No",completion:'Tarea completa: <span id = "task-pomo-counter"> 0 </span> Pomos',settingsHeader:"Configuración",personalizationHeader:"Opciones de personalización",accessibilityHeader:"Opciones de accesibilidad",settingsColor:"Daltonismo",settingsKeystroke:"Acceso mediante pulsación de tecla",settingsAuto:"Temporizador de inicio automático",settingsTab:"Visibilidad del temporizador",settingsBackgrounds:"Fondo",settingsLanguage:"Idioma",background1:"Original",background2:"Desierto",background3:"Lago",dropdownEn:"Inglés",dropdownKo:"Coreano",dropdownEs:"Español",statsHeader:"Estadísticas de usuario",todayHeader:"Hoy",pomoCycle:"Pomos ciclos:",pomoCycleUnits:'<span id = "today-pomodoros"> ____ </span> po.',todayInterruption:"Interrupciones:",totalTasks:"Total de tareas:",totalTasksUnits:'<span id = "today-tasks"> ____ </span> tareas',todayTasks:"Tareas",totalHeader:"Totales",totalPomoCycleUnits:'<span id = "total-pomodoros"> ____ </span> po.',avgInterruptions:"Promedio de interrupciones:",avgInterruptionsUnits:'<span id = "total-interruptions"> ____ </span> por po.',bestDay:"Mejor día:",bestDayUnits:'<span id = "total-best-pomo"> ____ </span> después. | <span id = "total-best-time"> ____ </span> min. ',totalTotalTasksUnits:'<span id = "total-tasks"> ____ </span> tareas',weeklyHeader:"Resumen semanal",weekDays:["Lu","Ma","Mi","Ju","Vi","Sa","Do"],day:"día",pomosCompleted:"pomo completado"},pomoHeader=document.getElementById("pomobear-header"),breakMsg=document.getElementById("break-message"),workIndicator$1=document.getElementById("work-indicator"),shortBreakIndicator$1=document.getElementById("short-break-indicator"),longBreakIndicator$1=document.getElementById("long-break-indicator"),startStopButton$1=document.getElementById("start-stop-button"),promptText=document.getElementById("prompt-text"),resetYes=document.getElementById("reset-yes-button"),resetNo=document.getElementById("reset-no-button"),taskBtn=document.getElementById("task"),settingsHeader=document.getElementById("settings-header"),personalizationHeader=document.getElementById("personalization-header"),accessibilityHeader=document.getElementById("accessibility-header"),settingsColor=document.getElementById("settings-color"),settingsKeystroke=document.getElementById("settings-keystroke"),settingsAuto=document.getElementById("settings-auto"),settingsTab=document.getElementById("settings-tab"),settingsBackgrounds=document.getElementById("settings-backgrounds"),dropdownOriginal=document.getElementById("background_1"),dropdownDesert=document.getElementById("background_2"),dropdownLake=document.getElementById("background_3"),settingsLanguage=document.getElementById("settings-languages"),languages=document.getElementById("languages"),dropdownEnglish=document.getElementById("english"),dropdownKorean=document.getElementById("korean"),dropdownSpanish=document.getElementById("spanish"),statsHeader=document.getElementById("stats-header"),statTodayHeader=document.getElementById("stat-today-header"),statPomoCycle=document.getElementById("stat-pomo-cycle"),statPomoCycleUnits=document.getElementById("stat-pomo-cycle-units"),statInterruption=document.getElementById("stat-interruption"),statTotalTasks=document.getElementById("stat-total-tasks"),statTotalTasksUnits=document.getElementById("stat-total-tasks-units"),statTotalHeader=document.getElementById("stat-total-header"),statTotalPomoCycleUnits=document.getElementById("stat-total-pomo-cycle-units"),statTotalPomoCycle=document.getElementById("stat-total-pomo-cycle"),statAvgInterruption=document.getElementById("stat-avg-interruptions"),statAvgInterruptionUnits=document.getElementById("total-interruptions-unit"),statBestDay=document.getElementById("stat-best-day"),statBestDayUnits=document.getElementById("stat-best-day-units"),statTotalTasksTotalUnits=document.getElementById("stat-total-tasks-total-units"),statTotalTasksTotal=document.getElementById("stat-total-tasks-total"),statWeeklyHeader=document.getElementById("stat-weekly-header");let lang=enUS;const storedLanguage=localStorage.getItem("language");switch(storedLanguage){case"enUS":lang=enUS,populateLanguage(),changeLanguageAxis(lang.weekDays,lang.day,lang.pomosCompleted),languages.value=dropdownEnglish.value;break;case"ko":lang=ko,populateLanguage(),languages.value=dropdownKorean.value,changeLanguageAxis(lang.weekDays,lang.day,lang.pomosCompleted);break;case"es":lang=es,populateLanguage(),languages.value=dropdownSpanish.value,changeLanguageAxis(lang.weekDays,lang.day,lang.pomosCompleted)}function setLanguageEn(){lang=enUS,localStorage.setItem("language","enUS"),populateLanguage(),changeLanguageAxis(lang.weekDays,lang.day,lang.pomosCompleted)}function setLanguageKo(){lang=ko,localStorage.setItem("language","ko"),populateLanguage(),changeLanguageAxis(lang.weekDays,lang.day,lang.pomosCompleted)}function setLanguageEs(){lang=es,localStorage.setItem("language","es"),populateLanguage(),changeLanguageAxis(lang.weekDays,lang.day,lang.pomosCompleted)}function changeLanguage(){"enUS"===this.value?setLanguageEn():"ko"===this.value?setLanguageKo():setLanguageEs()}function populateLanguage(){pomoHeader.innerHTML=lang.pomobearHeader,breakMsg.innerHTML=lang.breakMsg,workIndicator$1.innerHTML=lang.pomodoro,shortBreakIndicator$1.innerHTML=lang.shortBreak,longBreakIndicator$1.innerHTML=lang.longBreak,startStopButton$1.innerHTML=lang.begin,promptText.innerHTML=lang.interruption,resetYes.innerHTML=lang.yes,resetNo.innerHTML=lang.no,taskBtn.innerHTML=lang.completion,settingsHeader.innerHTML=lang.settingsHeader,personalizationHeader.innerHTML=lang.personalizationHeader,accessibilityHeader.innerHTML=lang.accessibilityHeader,settingsColor.innerHTML=lang.settingsColor,settingsKeystroke.innerHTML=lang.settingsKeystroke,settingsAuto.innerHTML=lang.settingsAuto,settingsTab.innerHTML=lang.settingsTab,settingsBackgrounds.innerHTML=lang.settingsBackgrounds,dropdownOriginal.innerHTML=lang.background1,dropdownDesert.innerHTML=lang.background2,dropdownLake.innerHTML=lang.background3,settingsLanguage.innerHTML=lang.settingsLanguage,dropdownEnglish.innerHTML=lang.dropdownEn,dropdownKorean.innerHTML=lang.dropdownKo,dropdownSpanish.innerHTML=lang.dropdownEs,statsHeader.innerHTML=lang.statsHeader,statTodayHeader.innerHTML=lang.todayHeader,statPomoCycle.innerHTML=lang.pomoCycle,statPomoCycleUnits.innerHTML=lang.pomoCycleUnits,statInterruption.innerHTML=lang.todayInterruption,statTotalTasks.innerHTML=lang.totalTasks,statTotalTasksUnits.innerHTML=lang.totalTasksUnits,statTotalHeader.innerHTML=lang.totalHeader,statTotalPomoCycleUnits.innerHTML=lang.totalPomoCycleUnits,statTotalPomoCycle.innerHTML=lang.pomoCycle,statAvgInterruption.innerHTML=lang.avgInterruptions,statAvgInterruptionUnits.innerHTML=lang.avgInterruptionsUnits,statBestDay.innerHTML=lang.bestDay,statBestDayUnits.innerHTML=lang.bestDayUnits,statTotalTasksTotalUnits.innerHTML=lang.totalTotalTasksUnits,statTotalTasksTotal.innerHTML=lang.totalTasks,statWeeklyHeader.innerHTML=lang.weeklyHeader}window.addEventListener("DOMContentLoaded",(function(){document.body.style.visibility="visible"}));const settingsPane=document.getElementById("settings-container"),settingsOpenButton=document.getElementById("settings-open-button"),settingsCloseButton=document.getElementById("settings-close-button"),settingsColorButton=document.getElementById("colors-switch"),settingsKeysButton=document.getElementById("keystroke-switch"),settingsAutoStartButton=document.getElementById("autostart-switch"),settingsTabButton=document.getElementById("tab-switch");settingsOpenButton.addEventListener("click",openSettingsPane),settingsCloseButton.addEventListener("click",closeSettingsPane),settingsColorButton.addEventListener("click",toggleAccessibility),settingsKeysButton.addEventListener("click",toggleKeystroke),settingsAutoStartButton.addEventListener("click",toggleAutoStart),settingsTabButton.addEventListener("click",toggleTab);let settingsPaneIsOpen=!1;function openSettingsPane(){removeAll(),statsPane.classList.contains(SLIDE_OPEN)?(closeStatsPane(),timerBlock.classList.remove(SLIDE_CLOSE),timerBlock.classList.add(SLIDE_ACROSS_LEFT),breakBlock.classList.remove(SLIDE_CLOSE),breakBlock.classList.add(SLIDE_ACROSS_LEFT)):(timerBlock.classList.add(SLIDE_OPEN_SETTINGS),breakBlock.classList.add(SLIDE_OPEN_SETTINGS)),settingsPane.classList.add(SLIDE_OPEN_SETTINGS),settingsPaneIsOpen=!0,toggleButtons()}function closeSettingsPane(){timerBlock.classList.remove(SLIDE_OPEN_SETTINGS),breakBlock.classList.remove(SLIDE_OPEN_SETTINGS),settingsPane.classList.remove(SLIDE_OPEN_SETTINGS),timerBlock.classList.remove(SLIDE_ACROSS_LEFT),breakBlock.classList.remove(SLIDE_ACROSS_LEFT),timerBlock.classList.add(SLIDE_CLOSE_SETTINGS),breakBlock.classList.add(SLIDE_CLOSE_SETTINGS),settingsPane.classList.add(SLIDE_CLOSE_SETTINGS),settingsPaneIsOpen=!1,toggleButtons()}function toggleButtons(){settingsOpenButton.disabled=settingsPaneIsOpen,settingsCloseButton.disabled=!settingsPaneIsOpen,settingsColorButton.disabled=!settingsPaneIsOpen,settingsKeysButton.disabled=!settingsPaneIsOpen,settingsAutoStartButton.disabled=!settingsPaneIsOpen,settingsTabButton.disabled=!settingsPaneIsOpen}function removeAll(){timerBlock.classList.remove(SLIDE_CLOSE),breakBlock.classList.remove(SLIDE_CLOSE),statsPane.classList.remove(SLIDE_CLOSE),timerBlock.classList.remove(SLIDE_CLOSE_SETTINGS),breakBlock.classList.remove(SLIDE_CLOSE_SETTINGS),settingsPane.classList.remove(SLIDE_CLOSE_SETTINGS)}function settingsPaneStatus(){return settingsPaneIsOpen}background.addEventListener("change",changeBackground),languages.addEventListener("change",changeLanguage);let vh=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",`${vh}px`),window.addEventListener("resize",(()=>{vh=.01*window.innerHeight,document.documentElement.style.setProperty("--vh",`${vh}px`)}));const taskButton=document.getElementById("task");let taskPomoCount=0;function increaseTaskPomo(){taskPomoCount++,document.getElementById(TASK_POMO_COUNTER).innerHTML=taskPomoCount}function toggleTaskButtonDisabled(t){0===taskPomoCount&&(t=!0),taskButton.disabled=t}function completeTask(){taskPomoCount=0,document.getElementById(TASK_POMO_COUNTER).innerHTML=taskPomoCount,incrTasks(),toggleTaskButtonDisabled(!0),updateStats()}taskButton&&(toggleTaskButtonDisabled(!0),taskButton.addEventListener("click",(function(t){completeTask(),t.preventDefault(),document.getElementById("animation-overlay").style.display="flex",setTimeout((function(){document.getElementById("animation-overlay").style.display="none"}),3e3)})));const STOP_TIMER_COLOR="var(--grey)",WORK_TIMER_COLOR="var(--red)",BREAK_TIMER_COLOR="var(--green)",COLORED_POT_SOURCE="images/honey-pot-color.svg",GRAY_POT_SOURCE="images/honey-pot-gray.svg",DASH_STROKE_VAL=220,MINUTES=60,BASE_10=10,FINAL_POMO=4,startStopButton=document.getElementById(START_STOP_ID),timerRing=document.getElementById("base-timer-path-remaining"),countdownText=document.getElementById("countdownText"),yesButton=document.getElementById("reset-yes-button"),noButton=document.getElementById("reset-no-button"),timerAudio=document.getElementById("timer-sound"),settingsButton=document.getElementById("settings-open-button"),statsButton=document.getElementById("stats-open-button"),workIndicator=document.getElementById("work-indicator"),longBreakIndicator=document.getElementById("long-break-indicator"),shortBreakIndicator=document.getElementById("short-break-indicator"),breakMessage=document.getElementById("break-message"),breakContainer=document.getElementById("break-container"),timeWorker=window.Worker&&!window.Cypress?new Worker("./scripts/timeWorker.js"):null,HOVER_TEXT="hover-text",BREAK_BUTTON="break-button",HIGHLIGHT="highlight";let legacyInterval,breakInterval,pomoCount=0,pomoState=timerOptions.STOPPED,onBreak=!1,firstReset=!0,firstEndSession=!0;function startResetController(){pomoState===timerOptions.STOPPED?startTimer():resetPrompt()}function beginCountdown(t){displayTime(--t);const e=onBreak?"var(--green)":"var(--red)";if(settingsButton.disabled=!onBreak,statsButton.disabled=!onBreak,settingsButton.style.opacity=onBreak?1:.2,statsButton.style.opacity=onBreak?1:.2,timerRing.setAttribute("stroke",e),timerRing.setAttribute("stroke-dasharray",220*timeFraction(t,pomoState)+" 220"),timeWorker){timeWorker.onmessage=t=>{if(pomoState===timerOptions.STOPPED)return;const{timeLeft:e}=t.data;displayTime(e),timerRing.setAttribute("stroke-dasharray",220*timeFraction(e,pomoState)+" 220"),e<0&&(stopTimer(),hidePrompt(),timeWorker.onmessage=void 0)};const e={start:!0,duration:t};timeWorker.postMessage(e)}else setCountdownInterval(t)}function setCountdownInterval(t){let e=t;legacyInterval=setInterval((()=>{--e,displayTime(e),timerRing.setAttribute("stroke-dasharray",220*timeFraction(e,pomoState)+" 220"),e<0&&(clearInterval(legacyInterval),stopTimer())}),1e3)}function togglePomoBreak(t){return startStopButton&&startStopButton.classList.toggle(BREAK_BUTTON),!t}function startTimer(t=onBreak,e=pomoCount){return settingsPaneStatus()&&closeSettingsPane(),statsPaneStatus()&&closeStatsPane(),onBreak||(toggleTaskButtonDisabled(!0),hideBreakMessage(),settingsPaneIsOpen&&closeSettingsPane(),statsPaneIsOpen&&closeStatsPane()),onBreak&&!isAutoStartEnabled()&&showBreakMessage(),timerAudio.paused||(timerAudio.pause(),timerAudio.currentTime=0),startStopButton&&(isAutoStartEnabled()?isAutoStartEnabled()&&onBreak?startStopButton.innerHTML=lang.end:isAutoStartEnabled()&&!onBreak&&(startStopButton.innerHTML=lang.reset):startStopButton.innerHTML=lang.reset,t?4===e?(e=0,pomoCount=0,pomoState=timerOptions.LONG,beginCountdown(900)):(e++,pomoState=timerOptions.SHORT,beginCountdown(300)):(pomoState=timerOptions.POMO,beginCountdown(1500))),[pomoState,e]}function stopTimer(){pomoState=timerOptions.STOPPED,timerAudio.play(),timerRing.setAttribute("stroke","var(--grey)"),countdownText.classList.remove(HOVER_TEXT),isAutoStartEnabled()&&!onBreak?startStopButton.innerHTML=lang.end:isAutoStartEnabled()?isAutoStartEnabled&&onBreak&&(startStopButton.innerHTML=lang.reset):startStopButton.innerHTML=lang.begin,onBreak?(displayTime(1500),timerTypeIndicator(timerOptions.POMO),isAutoStartEnabled()&&setTimeout(startResetController,1e3)):(pomoCount++,4===pomoCount?(displayTime(900),timerTypeIndicator(timerOptions.LONG)):(displayTime(300),timerTypeIndicator(timerOptions.SHORT)),incrPomoCount(),increaseTaskPomo(),updateStats(),isAutoStartEnabled()&&(showBreakMessage(),setTimeout(startResetController,1e3))),updatePots(),toggleTaskButtonDisabled(!1),onBreak=togglePomoBreak(onBreak),onBreak||hideBreakMessage()}function updatePots(){for(let t=1;t<pomoCount+1;t++)document.getElementById("pot"+t).src=COLORED_POT_SOURCE;for(let t=pomoCount+1;t<=4;t++)document.getElementById("pot"+t).src=GRAY_POT_SOURCE}function resetTimer(){return pomoState=timerOptions.STOPPED,toggleTaskButtonDisabled(!0),settingsButton.disabled=!1,statsButton.disabled=!1,settingsButton.style.opacity=1,statsButton.style.opacity=1,isAutoStartEnabled()&&onBreak||(incrInterruptions(),updateStats()),startStopButton&&(startStopButton.innerHTML=lang.begin,timeWorker&&timeWorker.postMessage({start:!1}),legacyInterval&&clearInterval(legacyInterval),onBreak&&(onBreak=togglePomoBreak(onBreak)),countdownText.classList.remove(HOVER_TEXT),timerRing.setAttribute("stroke","var(--grey)"),timerRing.setAttribute("stroke-dasharray","220 220"),displayTime(1500),timerTypeIndicator(1500)),onBreak||hideBreakMessage(),[pomoState,lang.begin]}function resetPrompt(){!firstEndSession&&isAutoStartEnabled()&&onBreak?resetTimer():firstReset||isAutoStartEnabled()&&onBreak?(startStopButton.style.display="none",isAutoStartEnabled()&&onBreak?document.getElementById("prompt-text").innerHTML=lang.interruption2:document.getElementById("prompt-text").innerHTML=lang.interruption,document.getElementById("prompt").style.display="flex",yesButton.disabled=!1,noButton.disabled=!1):resetTimer()}function hidePrompt(){startStopButton.style.display="",document.getElementById("prompt").style.display="none",yesButton.disabled=!0,noButton.disabled=!0}function resetConfirm(t){hidePrompt(),t&&isAutoStartEnabled()&&onBreak&&(firstEndSession=!1),!t||isAutoStartEnabled()&&onBreak||(firstReset=!1),t&&resetTimer()}function displayTime(t){let e,n;return e=parseInt(t/60,10),n=parseInt(t%60,10),e=e<10?"0"+e:e,n=n<10?"0"+n:n,countdownText.textContent=e+":"+n,isTabEnabled()?window.document.title=onBreak?"Break: "+countdownText.textContent:"Work: "+countdownText.textContent:window.document.title="Pomodoro by Texas Codem",countdownText.textContent}function timeFraction(t,e){return e===timerOptions.POMO?t/1500:e===timerOptions.LONG?t/900:t/300}function timerTypeIndicator(t){workIndicator.classList.remove(HIGHLIGHT),longBreakIndicator.classList.remove(HIGHLIGHT),shortBreakIndicator.classList.remove(HIGHLIGHT),t===timerOptions.LONG?longBreakIndicator.classList.add(HIGHLIGHT):t===timerOptions.SHORT?shortBreakIndicator.classList.add(HIGHLIGHT):workIndicator.classList.add(HIGHLIGHT)}function showBreakMessage(){breakMessage.style.visibility="visible",breakContainer.style.display="inline-block";let t=0;breakInterval=setInterval((e=>{t=(t+lang.breakMessages.length)%lang.breakMessages.length,breakMessage.innerText=lang.breakMessages[t],t++}),1e4)}function hideBreakMessage(){breakMessage.style.visibility="hidden",breakContainer.style.display="none",clearInterval(breakInterval)}hideBreakMessage(),startStopButton&&(startStopButton.classList.toggle(BREAK_BUTTON),startStopButton.addEventListener("click",startResetController)),countdownText&&countdownText.addEventListener("click",(()=>{pomoState!==timerOptions.STOPPED&&(countdownText.classList.contains(HOVER_TEXT)?countdownText.classList.remove(HOVER_TEXT):countdownText.classList.add(HOVER_TEXT))})),yesButton.addEventListener("click",(()=>{resetConfirm(!0)})),noButton.addEventListener("click",(()=>{resetConfirm(!1)}));export{beginCountdown,displayTime,hidePrompt,resetConfirm,resetPrompt,resetTimer,setCountdownInterval,settingsButton,startResetController,startTimer,statsButton,timeFraction,timerTypeIndicator,togglePomoBreak,updatePots};