import*as Constants from"./constants.js";import*as Storage from"./util/storage.js";import*as Settings from"./settings.js";import{drawGraph}from"./util/graph.js";const timerBlock=document.getElementsByClassName("center-container")[0],counterBlock=document.getElementsByClassName("counters-container")[0],statsPane=document.getElementById("stats-container"),statsOpenButton=document.getElementById("stats-open-button"),statsCloseButton=document.getElementById("stats-close-button"),totalPomoElem=document.getElementById("total-pomodoros"),totalInterruptElem=document.getElementById("total-interruptions"),bestPomoElem=document.getElementById("total-best-pomo"),bestTimeElem=document.getElementById("total-best-time"),totalTasksElem=document.getElementById("total-tasks"),todayPomoElem=document.getElementById("today-pomodoros"),todayTasksElem=document.getElementById("today-tasks"),todayInterruptElem=document.getElementById("today-interruptions"),graphCanvas=document.getElementById("weekly-graph"),MINUTES=60,NUM_DECIMALS=2;let statsPaneIsOpen=!1;function updateStats(){Storage.updateStorage(),displayTodayStats(),displayTotalStats(),drawGraph(graphCanvas,Storage.getWeekHistory())}function openStatsPane(){updateStats(),Settings.removeAll(),Settings.settingsPane.classList.contains(Constants.SLIDE_OPEN_SETTINGS)?(Settings.closeSettingsPane(),timerBlock.classList.add(Constants.SLIDE_ACROSS_LEFT)):timerBlock.classList.add(Constants.SLIDE_OPEN),statsPane.classList.add(Constants.SLIDE_OPEN),statsPaneIsOpen=!0,toggleButtons()}function closeStatsPane(){timerBlock.classList.remove(Constants.SLIDE_OPEN),statsPane.classList.remove(Constants.SLIDE_OPEN),timerBlock.classList.remove(Constants.SLIDE_ACROSS_LEFT),timerBlock.classList.add(Constants.SLIDE_CLOSE),statsPane.classList.add(Constants.SLIDE_CLOSE),statsPaneIsOpen=!1,toggleButtons()}function toggleButtons(){statsOpenButton.disabled=statsPaneIsOpen,statsCloseButton.disabled=!statsPaneIsOpen}function displayTotalStats(){var t=Storage.getCounter(Storage.TOTAL_POMO_ID),e=Storage.getCounter(Storage.TOTAL_INTERRUPTION),s=Storage.getCounter(Storage.BEST_DAILY_POMO_ID),o=Storage.getCounter(Storage.TOTAL_TASK_ID);totalPomoElem.textContent=t,totalInterruptElem.textContent=(e/(t||1)).toFixed(NUM_DECIMALS),bestPomoElem.textContent=s,bestTimeElem.textContent=(s*(Constants.WORK_LENGTH/MINUTES)).toFixed(NUM_DECIMALS),totalTasksElem.textContent=o}function displayTodayStats(){var t=Storage.getCounter(Storage.TODAY_POMO_ID),e=Storage.getCounter(Storage.TODAY_INTERRUPTION),s=Storage.getCounter(Storage.TODAY_TASK_ID);todayPomoElem.textContent=t,todayInterruptElem.textContent=e,todayTasksElem.textContent=s}statsOpenButton.onclick=openStatsPane,statsCloseButton.onclick=closeStatsPane;export{timerBlock,counterBlock,statsPane,statsOpenButton,statsCloseButton,statsPaneIsOpen,updateStats,openStatsPane,closeStatsPane,toggleButtons,displayTotalStats,displayTodayStats};